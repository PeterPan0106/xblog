(window.webpackJsonp=window.webpackJsonp||[]).push([[17,34],{1310:function(t,e,n){"use strict";n(941)},1311:function(t,e,n){var o=n(8)(!1);o.push([t.i,".vxe-button+.vxe-button[data-v-212743c2]{margin-left:0!important}",""]),t.exports=o},1341:function(t,e,n){"use strict";n.r(e);n(33),n(24),n(27),n(45),n(46);var o=n(12),r=(n(67),n(47),n(652)),c=n(13);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var d=0,f={layout:"admin",mixins:[r.default],data:function(){var t=this;return{selects:"",tableProxy:{ajax:{delete:function(e){return t.deleteDonate(t.selects)}}},tableToolbar:{slots:{buttons:"toolbar_buttons"},zoom:!0,custom:!0},editConfig:{trigger:"manual",mode:"row",autoClear:!1,icon:"none"},tableColumn:[{type:"checkbox",width:50},{field:"id",title:"导航id",width:100},{field:"name",title:"链接名",editRender:{name:"input"}},{field:"url",title:"链接地址",editRender:{name:"input"}},{title:"操作",slots:{default:"option"}}],choose:"",addCategoryDialog:!1,category:{name:"",value:"",parent:0},addOption:!0}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(c.b)("admin-plugins",["navigation"])),mounted:function(){this.updateNavigation(!1,!1)},methods:{updateNavigation:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.addCategoryDialog=!1,this.$store.dispatch("admin-plugins/getNavigations"),e&&this.$message.success("操作成功"),t&&(this.choose="",d=0,this.updateData(!1))},checkboxChangeEvent:function(data){var t=[];data.records.map((function(e){return t.push(e.id)})),this.selects=t.toString()},editRowEvent:function(t){this.$refs.grid.setActiveRow(t)},saveRowEvent:function(t){var e=this;this.$refs.grid.clearActived().then((function(){var data={name:t.name,value:t.url,parent:d};isNaN(t.id)?e.$store.dispatch("admin-plugins/addNavigation",data).then((function(t){return e.updateData()})).catch((function(t){e.$message.error(t),e.updateData(!1)})):e.$store.dispatch("admin-plugins/updateNavigation",{id:t.id,data:data}).then((function(t){return e.updateData()})).catch((function(t){return e.$message.error(t)}))}))},updateData:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&this.$message.success("更新成功"),this.$refs.grid.commitProxy("query")},deleteDonate:function(t){var e=this;""===t?this.$message.warning("请选择内容！"):this.$store.dispatch("admin-plugins/deleteNavigation",t).then((function(t){return e.updateData()})).catch((function(t){return e.$message.error(t)}))},getItems:function(t){d=t,this.updateData(!1)},changeNavigation:function(t){var e=this;if(t)this.addOption=!0,this.category.name="",this.category.value="";else{if(this.checkCategory())return;this.navigation.forEach((function(t){t.id===e.choose&&(e.category.name=t.name,e.category.value=t.color)})),this.addOption=!1}this.addCategoryDialog=!0},addNavigationCategory:function(){var t=this,e=this.category;""!==e.name&&""!==e.value?this.addOption?this.$store.dispatch("admin-plugins/addNavigation",e).then((function(){t.updateNavigation(!0)})).catch((function(e){return t.$message.error(e)})):this.$store.dispatch("admin-plugins/updateNavigation",{id:d,data:e}).then((function(){t.updateNavigation(!1)})).catch((function(e){return t.$message.error(e)})):this.$message.warning("请填写内容和颜色")},checkCategory:function(){return 0===d&&(this.$message.warning("请先选择分类"),!0)},deleteNavigation:function(){var t=this;this.checkCategory()||this.$store.dispatch("admin-plugins/deleteNavigation",d).then((function(){t.updateNavigation(!0)})).catch((function(e){return t.$message.error(e)}))},addLink:function(){var t=this;this.checkCategory()||this.$refs.grid.insert().then((function(e){var n=e.row;return t.$refs.grid.setActiveRow(n)}))}}},v=(n(1310),n(5)),component=Object(v.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("vxe-grid",{ref:"grid",attrs:{border:"",resizable:"",height:"700","row-id":"id","pager-config":{pageSize:10},"proxy-config":t.tableProxy,"toolbar-config":t.tableToolbar,columns:t.tableColumn,"edit-config":t.editConfig},on:{"checkbox-change":t.checkboxChangeEvent,"checkbox-all":t.checkboxChangeEvent},scopedSlots:t._u([{key:"toolbar_buttons",fn:function(){return[n("el-select",{attrs:{placeholder:"请选择"},on:{change:t.getItems},model:{value:t.choose,callback:function(e){t.choose=e},expression:"choose"}},t._l(t.navigation,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),t._v(" "),n("vxe-button",{attrs:{status:"primary",icon:"fa fa-plus"},on:{click:function(e){return t.changeNavigation(!0)}}},[t._v("\n        添加分类\n      ")]),t._v(" "),n("el-popconfirm",{attrs:{title:"确定要删除这条分类？"},on:{onConfirm:t.deleteNavigation}},[n("vxe-button",{attrs:{slot:"reference",status:"danger",icon:"fa fa-trash"},slot:"reference"},[t._v("\n          删除分类\n        ")])],1),t._v(" "),n("vxe-button",{attrs:{status:"info",icon:"fa fa-edit"},on:{click:function(e){return t.changeNavigation(!1)}}},[t._v("\n        修改分类\n      ")]),t._v(" "),n("vxe-button",{attrs:{status:"success",icon:"fa fa-link"},on:{click:t.addLink}},[t._v("\n        添加网站\n      ")]),t._v(" "),n("el-popconfirm",{attrs:{title:"确定要删除？"},on:{onConfirm:function(e){return t.deleteDonate(t.selects)}}},[n("vxe-button",{attrs:{slot:"reference",status:"danger",icon:"fa fa-trash"},slot:"reference"},[t._v("\n          删除选中网站\n        ")])],1)]},proxy:!0},{key:"option",fn:function(e){var o=e.row;return[t.$refs.grid.isActiveByRow(o)?n("vxe-button",{attrs:{icon:"fa fa-save",status:"primary",title:"保存",circle:""},on:{click:function(e){return t.saveRowEvent(o)}}}):n("vxe-button",{attrs:{icon:"fa fa-edit",title:"编辑",circle:""},on:{click:function(e){return t.editRowEvent(o)}}}),t._v(" "),n("el-popconfirm",{attrs:{title:"确定要删除这条链接？"},on:{onConfirm:function(e){return t.deleteDonate(o.id)}}},[n("vxe-button",{attrs:{slot:"reference",icon:"fa fa-trash",title:"删除",circle:""},slot:"reference"})],1)]}}])}),t._v(" "),n("el-dialog",{attrs:{"close-on-click-modal":!1,title:t.addOption?"添加分类":"修改分类",visible:t.addCategoryDialog,width:"350px"},on:{"update:visible":function(e){t.addCategoryDialog=e}}},[n("el-form",{ref:"form",attrs:{"label-width":"80px"}},[n("el-form-item",{attrs:{label:"分类名字"}},[n("el-input",{model:{value:t.category.name,callback:function(e){t.$set(t.category,"name",e)},expression:"category.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"分类颜色"}},[n("div",{staticStyle:{display:"flex"}},[n("el-input",{model:{value:t.category.value,callback:function(e){t.$set(t.category,"value",e)},expression:"category.value"}}),t._v(" "),n("el-color-picker",{staticStyle:{"margin-left":"3px"},model:{value:t.category.value,callback:function(e){t.$set(t.category,"value",e)},expression:"category.value"}})],1)])],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.addCategoryDialog=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.addNavigationCategory}},[t._v("确 定")])],1)],1)],1)}),[],!1,null,"212743c2",null);e.default=component.exports},652:function(t,e,n){"use strict";n.r(e),e.default={head:function(){return{title:"XBlog后台管理系统"}}}},941:function(t,e,n){var content=n(1311);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(9).default)("1f7934a8",content,!0,{sourceMap:!1})}}]);