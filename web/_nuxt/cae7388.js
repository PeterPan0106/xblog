(window.webpackJsonp=window.webpackJsonp||[]).push([[35,34],{1262:function(e,t,n){"use strict";n(917)},1263:function(e,t,n){var o=n(8)(!1);o.push([e.i,".vxe-button+.vxe-button[data-v-dde5fee2]{margin-left:0!important}",""]),e.exports=o},1316:function(e,t,n){"use strict";n.r(t);n(67);var o=n(652),r=n(151),c={layout:"admin",mixins:[o.default],data:function(){var e=this;return{selects:"",tableProxy:{ajax:{query:function(e){var t=e.page,form=e.form;return Object(r.b)({page:t.currentPage,page_size:t.pageSize,search_type:form.search_type,search_key:form.search_key})},delete:function(t){return e.updateComment(e.selects,null,!0)}}},tableForm:{items:[{field:"search_type",title:"搜索类型",itemRender:{name:"$select",options:[{label:"昵称",value:"nickname"},{label:"评论内容",value:"content"},{label:"用户邮箱",value:"email"},{label:"用户ip",value:"ip"},{label:"评论状态",value:"agree"}]}},{field:"search_key",visibleMethod:function(e){return"agree"!==e.data.search_type},title:"关键词",itemRender:{name:"$input",attrs:{placeholder:"请输入文章标题"}}},{field:"search_key",visibleMethod:function(e){return"agree"===e.data.search_type},title:"评论状态",itemRender:{name:"$select",options:[{label:"已通过",value:"1"},{label:"已拒绝",value:"0"}]}},{itemRender:{name:"$button",props:{content:"查询",type:"submit",status:"primary"}}},{itemRender:{name:"$button",props:{content:"重置",type:"reset"}}}]},tableToolbar:{buttons:[{code:"agree",name:"允许",icon:"fa fa-check",status:"success"},{code:"deny",name:"拒绝",icon:"fa fa-close",status:"warning"},{code:"delete",name:"删除选中",icon:"fa fa-trash",status:"danger"}],zoom:!0,custom:!0},tableColumn:[{type:"checkbox",width:50},{field:"author",title:"昵称"},{field:"content",title:"评论内容"},{field:"ip",title:"用户ip"},{field:"email",title:"邮箱"},{field:"status",title:"状态",formatter:"formatReview",width:100},{field:"date",title:"评论时间"},{title:"操作",slots:{default:"option"}}]}},methods:{toolbarClick:function(e){var code=e.code;e.button;switch(code){case"agree":this.updateComment(this.selects,"1");break;case"deny":this.updateComment(this.selects,"0")}},checkboxChangeEvent:function(data){var e=[];data.records.map((function(t){return e.push(t.id)})),this.selects=e.toString()},updateComment:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(""===e)this.$message.warning("请选择内容！");else{var data={agree:t},r=function(){n.$message.success("更新成功"),n.$refs.grid.commitProxy("query")};o?this.$store.dispatch("admin-comments/deleteComments",e).then((function(e){return r()})).catch((function(e){return n.$message.error(e)})):this.$store.dispatch("admin-comments/updateComments",{id:e,data:data}).then((function(e){return r()})).catch((function(e){return n.$message.error(e)}))}}}},l=(n(1262),n(5)),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-card",{staticClass:"box-card"},[n("vxe-grid",{ref:"grid",attrs:{border:"",resizable:"",height:"780","row-id":"id","pager-config":{pageSize:10},"proxy-config":e.tableProxy,"form-config":e.tableForm,"toolbar-config":e.tableToolbar,columns:e.tableColumn},on:{"toolbar-button-click":e.toolbarClick,"checkbox-change":e.checkboxChangeEvent,"checkbox-all":e.checkboxChangeEvent},scopedSlots:e._u([{key:"option",fn:function(t){var o=t.row;return[o.status?n("vxe-button",{attrs:{icon:"fa fa-close",title:"拒绝",circle:""},on:{click:function(t){return e.updateComment(o.id,"0")}}}):n("vxe-button",{attrs:{icon:"fa fa-check",title:"允许",circle:""},on:{click:function(t){return e.updateComment(o.id,"1")}}}),e._v(" "),n("el-popconfirm",{attrs:{title:"确定要删除这条评论？"},on:{onConfirm:function(t){return e.updateComment(o.id,null,!0)}}},[n("vxe-button",{attrs:{slot:"reference",icon:"fa fa-trash",title:"删除",circle:""},slot:"reference"})],1)]}}])})],1)],1)}),[],!1,null,"dde5fee2",null);t.default=component.exports},652:function(e,t,n){"use strict";n.r(t),t.default={head:function(){return{title:"XBlog后台管理系统"}}}},917:function(e,t,n){var content=n(1263);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(9).default)("c67feae2",content,!0,{sourceMap:!1})}}]);