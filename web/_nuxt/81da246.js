(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{736:function(t,e,l){var content=l(818);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,l(9).default)("725dee5b",content,!0,{sourceMap:!1})},737:function(t,e,l){var content=l(820);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,l(9).default)("03c800af",content,!0,{sourceMap:!1})},817:function(t,e,l){"use strict";l(736)},818:function(t,e,l){var n=l(8)(!1);n.push([t.i,".img_upload .el-upload--picture-card{display:none!important}.el-upload-list--picture-card .el-upload-list__item{height:auto!important;border:0!important;outline:none}",""]),t.exports=n},819:function(t,e,l){"use strict";l(737)},820:function(t,e,l){var n=l(8)(!1);n.push([t.i,".tool-img-item[data-v-7c0f1328]{display:flex;flex-direction:column}.tool-img-item h4[data-v-7c0f1328]{font-size:15px;font-weight:800;margin:5px 0}",""]),t.exports=n},948:function(t,e,l){"use strict";l.r(e);var n={name:"TypeUpload",props:{title:{type:String,default:""},field:{type:String,default:""},model:{type:String,default:""}},data:function(){return{dialogImageUrl:"",dialogVisible:!1,disabled:!1,fileList:""===this.model?[]:[{name:"test.png",url:this.model}]}},methods:{handleRemove:function(){this.fileList=[],this.setSetting("")},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleChangeAddr:function(){var t=this;this.$prompt("图片地址","提示",{confirmButtonText:"修改",cancelButtonText:"取消",inputValue:this.model,closeOnClickModal:!1}).then((function(e){var l=e.value;t.setSetting(l)}))},setSetting:function(t){var e=this;this.$store.dispatch("admin-settings/updateOption",{key:this.field,type:"string",value:t}).then((function(){e.$message.success("保存成功"),""!==t&&(e.fileList[0].url=t),e.$emit("update:model",t)})).catch((function(){e.$message.error("保存设置失败"),e.fileList[0].url=t=e.model}))},upload:function(t,e){var l=this,data=new FormData;data.append("file",e.raw),this.$store.dispatch("admin-file/uploadImage",data).then((function(t){l.fileList=[t],l.$store.dispatch("admin-settings/updateOption",{key:l.field,type:"string",value:l.fileList[0].url}).then((function(){l.$message.success("保存成功"),l.$emit("update:model",l.data)})).catch((function(){l.$message.error("保存设置失败"),l.fileList=[{name:"test.png",url:l.model}]}))})).catch((function(){l.fileList=[{name:"test.png",url:l.model}],l.$message.error("上传图片失败")}))}}},o=(l(817),l(819),l(5)),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[l("div",{staticClass:"tool-img-item"},[l("h4",[t._v(t._s(t.title))]),t._v(" "),l("el-upload",{ref:"upload",class:{img_upload:t.fileList.length>0&&""!==t.fileList[0].url},attrs:{action:"#","list-type":"picture-card","auto-upload":!0,"file-list":t.fileList,"on-progress":t.upload},scopedSlots:t._u([{key:"file",fn:function(e){var n=e.file;return l("div",{},[l("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:n.url,alt:""}}),t._v(" "),l("span",{staticClass:"el-upload-list__item-actions"},[l("span",{staticClass:"el-upload-list__item-preview",on:{click:t.handleChangeAddr}},[l("i",{staticClass:"el-icon-edit"})]),t._v(" "),l("span",{staticClass:"el-upload-list__item-preview",on:{click:function(e){return t.handlePictureCardPreview(n)}}},[l("i",{staticClass:"el-icon-zoom-in"})]),t._v(" "),t.disabled?t._e():l("span",{staticClass:"el-upload-list__item-delete",on:{click:function(e){return t.handleRemove()}}},[l("i",{staticClass:"el-icon-delete"})])])])}}])},[l("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),t._v(" "),l("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[l("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])}),[],!1,null,"7c0f1328",null);e.default=component.exports}}]);